<html>

<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
	<title>CollabDesk</title>

	<!-- Load style sheets -->
	<link rel="stylesheet" href="jquery-ui-1.10.2/themes/smoothness/jquery-ui.css" />
	<link rel="stylesheet" href="bootstrap/css/bootstrap.css" />

	<!-- Load any supplemental Javascript libraries here -->
	<script type="text/javascript" src="jquery-ui-1.10.2/jquery-1.9.1.js"></script>
	<script type="text/javascript" src="jquery-ui-1.10.2/ui/jquery-ui.js"></script>
	<script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>

	<!-- Load our own Javascript files and stylesheets here -->
	<script type="text/javascript" src="message.js"></script>
	<script type="text/javascript" src="database.js"></script>
	<script type="text/javascript" src="preloadData.js"></script>
	<script type="text/javascript" src="readMessage.js"></script>
	<script type="text/javascript" src="createMessage.js"></script>
	<script type="text/javascript" src="search.js"></script>	
	<link rel="stylesheet" href="styles.css" />

	<script type="text/javascript">
	$(document).ready(function(){
		var search = new Search();		

		// example of creating a message and getting day and time
		var msg = new Message('LOST PACKAGE', 'Mary lost a package', 'Jiayi', ['tag1', 'tag2'], 'note', false, false);
		console.log(msg);
		$('#date').html(msg.toString());
		msg.getDay();
		msg.getTime();

		// view the preloaded database
		console.log(db);
		// display a static message in the reading pane (until this is called from browsing pane)
		// displayMessage(3);

		/*
		Submits the form when the user clicks the Submit button
		*/
		$("#submitBtn").click(function() {
			console.log("reached here");
			//console.debug("submit button clicked");
			submit();
		});

		/*
		Submits the form when the user has focus on the Submit button and presses enter
		*/
		$("#submitBtn").keydown(function (e) {
			if (e.which == 13) {
				submit();
			}
		});

		/***********
		* Listeners
		************/
		$("#search-tbox").keydown(function(event){
			if(event.which==13){ //checking for 'enter'
				var inp=$(this).val();
				console.log("Listening to ENTER. input is "+inp);
				console.log(search.getMessageIDs(inp,db));
			}
		});

		$("#search-tbox").autocomplete({
			source: function(request, response){
				//console.log("request");
				//console.log(request);
				response(search.getMessageTitles(request.term.toLowerCase(),db));
			}
		});
	});
	</script>

</head>

<body>

<div class="loginHeader row-fluid btn disabled">
		<div class="span8"> 
			<div class="">
				<h3 class="logo side floatLeft">CollabDesk</h3>
			</div>
		</div>
		<div class="span4"> 
			<div class="">
				<div class="avatar side">
					<img class="avatar" src="images/generic_avatar.jpg"/>
				</div>
				<h3 class=" side">Sally</h3>
			</div>
		</div>
	</div>


<div class="container-fluid">

		<!-- browse pane -->
			<div class="browse side floatLeft left">Browse Pane
				<div id="date"></div>
				<input type="text" id="search-tbox" autofocus />
			</div>

<div class="side floatRight right">

		<!-- reading pane -->
		<div class="reading-outer">
            <div class="reading wrapper">
           
           		<div class="reading-inner originalMsg">
           			<div class="originalMessageHeader">
		                <div id="readMessageTitle">
		                	<span class="floatLeft messageTitle">Missing Package</span>
		                	<div class="high_pri floatRight"><img class="high_pri" src="images/high_pri.jpg"/></div>
							<div class="captain floatRight"><img class="captain" src="images/captain.jpg"/></div>
							<div class="clear"></div>
		                </div>
		            </div>

		            <div class="originalMessageSubHeader">
		            	Katie Jan 4, 2013 8:29PM
		            </div>

		            <div class="originalMsgBody">
		            	The mailboxes need fixing
		            </div>

		            <div class="replies">
		            	fixed
		            </div>

		            <div class="alignBottom parentWidth">

		                <div class="hashtags" style="">
							 <div class="floatLeft tag">#mailboxes</div>
							 <div class="floatLeft tag">#Jacinto</div>
							 <div class="clear"></div>
		                </div>

		                <div class="floatRight">
			                <button type="button" class="replyButton btn">Reply</button>
			            </div>
			        </div>
	            </div>
	        </div>
        </div>


		<!-- create message pane -->
		<div class="create">	
		</div>

</div>

</body>
</html>